window.addEventListener("load",function(){let e=document.querySelectorAll(".tag-select");e.forEach(d=>{let c=d.querySelector(".tag-select-input"),n=d.querySelector(".tag-select-selected"),o=d.querySelector(".tag-select-dropdown-list"),r=d.querySelector(".tag-select select"),e=d.querySelectorAll(".tag-select select option");e&&e.forEach(t=>{let s=document.createElement("li"),a=document.createElement("li");var e=t.hasAttribute("selected");s.dataset.id=t.value,s.innerHTML=t.innerText+'<span class="tag-select-close">&times;</span>',n.appendChild(s),e||s.classList.add("is-hidden"),a.dataset.id=t.value,a.innerHTML=t.innerText,e&&a.classList.add("is-active"),o.appendChild(a),o.childNodes.forEach(e=>{e.addEventListener("click",function(){e.dataset.id===s.dataset.id&&(s.classList.toggle("is-hidden"),a.classList.toggle("is-active"),t.toggleAttribute("selected"))})});let l=d.querySelectorAll(".tag-select-close");l.forEach(e=>{e.addEventListener("click",function(){s.dataset.id===e.parentNode.dataset.id&&(s.classList.toggle("is-hidden"),a.classList.toggle("is-active"),t.toggleAttribute("selected"))})})}),d.addEventListener("keydown",function(e){if("Enter"===e.key){let e=d.querySelectorAll("[data-id]"),t=c.value,s=document.createElement("li"),a=document.createElement("li"),l=document.createElement("option"),i=(s.dataset.id=t,s.innerHTML=t+'<span class="tag-select-close">&times;</span>',a.dataset.id=t,a.innerHTML=t,a.classList.add("is-active"),l.dataset.id=t,l.innerHTML=t,l.value=t,l.setAttribute("selected",""),""!==t&&(o.appendChild(a),n.appendChild(s),r.appendChild(l)),c.value="",e.forEach(e=>{t===e.dataset.id&&e.remove()}),o.childNodes.forEach(e=>{e.addEventListener("click",function(){e.dataset.id===s.dataset.id&&(s.classList.toggle("is-hidden"),a.classList.toggle("is-active"),l.toggleAttribute("selected"))})}),d.querySelectorAll(".tag-select-close"));i.forEach(e=>{e.addEventListener("click",function(){l.dataset.id===e.parentNode.dataset.id&&(s.classList.add("is-hidden"),a.classList.remove("is-active"),l.removeAttribute("selected"))})})}})}),window.addEventListener("click",function(t){if(t.target.matches(".tag-select-dropdown *")||document.querySelectorAll(".tag-select-dropdown").forEach(e=>{e.classList.remove("is-active")}),t.target.className.includes("tag-select-selected")){let e=t.target.nextElementSibling;e.classList.toggle("is-active")}})});